# üß≥ Ag√™ncia de Viagens - CRUD com Django

Sistema web de gerenciamento de pacotes de viagem, com opera√ß√µes CRUD completas, desenvolvido com Django e estilizado com Bootstrap 5.

## üß≠ 1. Vis√£o Geral do Projeto

Este projeto √© um sistema web b√°sico de gerenciamento de pacotes de viagens, permitindo:

- Cria√ß√£o
- Listagem
- Visualiza√ß√£o
- Edi√ß√£o
- Exclus√£o de pacotes

Utiliza **Class-Based Views (CBVs)** para otimizar o desenvolvimento e **Bootstrap 5** para uma interface moderna e responsiva.

---

## üõ† 1.1 Tecnologias Utilizadas

- **Framework Backend**: Django (Python)
- **Banco de Dados**: SQLite3 (padr√£o de desenvolvimento)
- **Frontend**: HTML + CSS (Bootstrap 5.3)
- **Views**: CBVs ‚Äì ListView, DetailView, CreateView, UpdateView, DeleteView

---

## üìÅ 1.2 Estrutura de Diret√≥rios

Viagem/
‚îú‚îÄ‚îÄ agencia/
‚îÇ ‚îú‚îÄ‚îÄ migrations/
‚îÇ ‚îú‚îÄ‚îÄ templates/
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ agencia/
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ viagem_list.html
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ viagem_detail.html
‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ viagem_form.html
‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ viagem_confirm_delete.html
‚îÇ ‚îú‚îÄ‚îÄ admin.py
‚îÇ ‚îú‚îÄ‚îÄ models.py
‚îÇ ‚îú‚îÄ‚îÄ views.py
‚îÇ ‚îî‚îÄ‚îÄ urls.py
‚îú‚îÄ‚îÄ Viagem/
‚îÇ ‚îú‚îÄ‚îÄ settings.py
‚îÇ ‚îî‚îÄ‚îÄ urls.py
‚îú‚îÄ‚îÄ templates/
‚îÇ ‚îî‚îÄ‚îÄ base.html
‚îú‚îÄ‚îÄ manage.py
‚îî‚îÄ‚îÄ db.sqlite3

---

## ‚öôÔ∏è 2. Configura√ß√£o e Instala√ß√£o

### 2.1 Pr√©-requisitos

- Python 3.8+
- pip
- Ambiente Virtual (recomendado)

### 2.2 Instala√ß√£o

```bash
# Ativar ambiente virtual
.venv\Scripts\activate

# Instalar depend√™ncias
pip install django~=5.0

# Registrar o app no settings.py
# settings.py
INSTALLED_APPS = [
    ...
    'agencia',
]

# Diret√≥rio de templates
'DIRS': [os.path.join(BASE_DIR, 'templates')],

2.3 Migra√ß√µes e Execu√ß√£o
# Criar tabelas
python manage.py makemigrations agencia
python manage.py migrate

# Iniciar servidor
python manage.py runserver

üß± 3. Modelo de Dados - Viagem
class Viagem(models.Model):
    titulo = models.CharField(max_length=150)
    destino = models.CharField(max_length=100)
    data_partida = models.DateField()
    data_retorno = models.DateField()
    duracao_dias = models.IntegerField()
    preco_base = models.DecimalField(max_digits=10, decimal_places=2)
    vagas_disponiveis = models.PositiveIntegerField(default=10)
    tipo_transporte = models.CharField(max_length=50, choices=[('A√©reo', 'A√©reo'), ('Terrestre', 'Terrestre'), ('Mar√≠timo', 'Mar√≠timo')])
    hospedagem_inclusa = models.BooleanField(default=True)
    codigo_pacote = models.CharField(max_length=20, unique=True)
    descricao_detalhada = models.TextField()

üîÅ 4. Funcionalidades CRUD
4.1 URLs - agencia/urls.py
| URL                   | View               | Nome             |
| --------------------- | ------------------ | ---------------- |
| `''`                  | `ViagemListView`   | `viagem_lista`   |
| `'nova/'`             | `ViagemCreateView` | `viagem_nova`    |
| `'<int:pk>/'`         | `ViagemDetailView` | `viagem_detalhe` |
| `'<int:pk>/editar/'`  | `ViagemUpdateView` | `viagem_editar`  |
| `'<int:pk>/excluir/'` | `ViagemDeleteView` | `viagem_excluir` |

4.2 Views - agencia/views.py

CreateView / UpdateView: usam fields = '__all__' para gera√ß√£o autom√°tica de formul√°rio.

ListView: renderiza viagem_list.html, vari√°vel viagens.

DetailView: renderiza viagem_detail.html, vari√°vel viagem.

DeleteView: usa viagem_confirm_delete.html.


üé® 5. Interface e Estiliza√ß√£o (Bootstrap 5)
5.1 Template Base (base.html)

Todos os templates estendem este layout, com:
{% block content %}{% endblock %}

5.2 Estiliza√ß√£o do Formul√°rio (viagem_form.html)

5.3 Conven√ß√µes Visuais

Pre√ßos: {{ viagem.preco_base|floatformat:2 }}

Datas: {{ viagem.data_partida|date:"d/m/Y" }}

Tabelas: table table-striped table-hover

‚úÖ Conclus√£o

Este projeto oferece uma base s√≥lida para sistemas web com opera√ß√µes CRUD usando Django. Ideal para iniciantes aprenderem boas pr√°ticas como CBVs, templates com heran√ßa e estrutura modular.




üìë Documenta√ß√£o do M√≥dulo de Autentica√ß√£o

Este m√≥dulo descreve a implementa√ß√£o completa do sistema de autentica√ß√£o de usu√°rios, incluindo as funcionalidades de login, logout e cadastro, todas customizadas com estiliza√ß√£o Bootstrap para uma experi√™ncia de usu√°rio aprimorada.

1. Configura√ß√£o de URLs e Formul√°rios Customizados

Para integrar a estiliza√ß√£o Bootstrap (classe form-control) sem depend√™ncias de terceiros, utilizamos formul√°rios customizados que herdam os formul√°rios padr√£o do Django (AuthenticationForm e UserCreationForm).

1.1. Arquivo: agencia/forms.py

Crie este arquivo para definir os formul√°rios de autentica√ß√£o estilizados.
Python

from django.contrib.auth.forms import AuthenticationForm, UserCreationForm

class BootstrapAuthenticationForm(AuthenticationForm):
    """Herda o formul√°rio de login e aplica a classe 'form-control'."""
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        
        # Define os r√≥tulos em Portugu√™s
        self.fields['username'].label = 'Nome de Usu√°rio'
        self.fields['password'].label = 'Senha'
        
        # Aplica a classe Bootstrap aos campos
        for field_name in self.fields:
            self.fields[field_name].widget.attrs['class'] = 'form-control'

class BootstrapUserCreationForm(UserCreationForm):
    """Herda o formul√°rio de cria√ß√£o de usu√°rio e aplica a classe 'form-control'."""
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        
        # Define os r√≥tulos e textos de ajuda em Portugu√™s
        self.fields['username'].label = 'Nome de Usu√°rio'
        self.fields['password1'].label = 'Senha'
        self.fields['password2'].label = 'Confirma√ß√£o de Senha'
        self.fields['password2'].help_text = 'Digite a mesma senha novamente para confirma√ß√£o.'
        
        # Aplica a classe Bootstrap aos campos
        for field_name in self.fields:
            self.fields[field_name].widget.attrs['class'] = 'form-control'

2. Configura√ß√£o de Views (Cadastro)

A view de login (LoginView) √© customizada diretamente no urls.py. No entanto, para o Cadastro de Usu√°rio, √© necess√°rio criar uma Class-Based View (CBV) no views.py.

2.1. Arquivo: agencia/views.py

Adicione a CadastroUsuarioView que utiliza o formul√°rio customizado e define o template de sucesso (redirecionando para o login).
Python

# agencia/views.py

from django.views.generic import CreateView
from django.urls import reverse_lazy
from .forms import BootstrapUserCreationForm # Importa o formul√°rio customizado
# ... (outras imports)

class CadastroUsuarioView(CreateView):
    """View para cria√ß√£o de novos usu√°rios com estiliza√ß√£o Bootstrap."""
    
    # Utiliza o formul√°rio customizado para aplicar o estilo e o idioma
    form_class = BootstrapUserCreationForm 
    
    # Template para renderizar o formul√°rio
    template_name = 'registration/cadastro.html' 
    
    # Redireciona para a tela de login ap√≥s o sucesso
    success_url = reverse_lazy('login') 

3. Mapeamento de Rotas (URLconf)

Todas as rotas de autentica√ß√£o s√£o centralizadas no urls.py principal, utilizando o prefixo /contas/. A view de login √© definida explicitamente para usar o BootstrapAuthenticationForm.

3.1. Arquivo: Viagem/Viagem/urls.py

Python

from django.contrib import admin
from django.urls import path, include
from django.contrib.auth import views as auth_views
from agencia.forms import BootstrapAuthenticationForm 
from agencia.views import CadastroUsuarioView 

urlpatterns = [
    path('admin/', admin.site.urls),
    
    # 1. Rota de Cadastro
    path('contas/cadastro/', CadastroUsuarioView.as_view(), name='cadastro'),
    
    # 2. Rota de Login (Customizada para usar o formul√°rio estilizado)
    path('contas/login/', auth_views.LoginView.as_view(
        template_name='registration/login.html', 
        form_class=BootstrapAuthenticationForm 
    ), name='login'),
    
    # 3. Restante das rotas do Django Auth (Logout, Password Reset)
    # Estas rotas usar√£o o prefixo '/contas/' e o sistema de internacionaliza√ß√£o do Django
    path('contas/', include('django.contrib.auth.urls')), 
    
    # 4. Rotas da aplica√ß√£o principal (agencia)
    path('', include('agencia.urls')), 
]

4. Configura√ß√£o de Templates (Front-end)

4.1. Template: agencia/templates/registration/cadastro.html

Este template renderiza o BootstrapUserCreationForm. √â crucial notar que o campo √© renderizado usando {{ field }}, pois a classe Bootstrap j√° foi injetada no forms.py.
HTML

{% extends 'base.html' %}
{% block title %}Cadastro de Usu√°rio{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6 col-lg-4">
        <div class="card shadow-lg mt-5">
            <div class="card-header bg-success text-white text-center">
                <h3 class="mb-0">Criar Nova Conta</h3>
            </div>
            <div class="card-body">
                
                <form method="post">
                    {% csrf_token %}
                    
                    {% for field in form %}
                        <div class="mb-3">
                            <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
                            
                            {{ field }} 
                            
                            {% for error in field.errors %}
                                <div class="text-danger small">{{ error }}</div>
                            {% endfor %}
                            
                            {% if field.help_text %}
                                <div class="form-text text-muted">{{ field.help_text|safe }}</div>
                            {% endif %}
                        </div>
                    {% endfor %}

                    <button type="submit" class="btn btn-success w-100 mt-3">
                        Registrar
                    </button>
                </form>
            </div>
            <div class="card-footer text-center">
                <small class="text-muted">J√° tem uma conta? <a href="{% url 'login' %}">Fa√ßa Login</a></small>
            </div>
        </div>
    </div>
</div>
{% endblock %}

5. Integra√ß√£o na Interface (Navega√ß√£o)

A navega√ß√£o deve ser condicional, mostrando as op√ß√µes de Entrar e Cadastrar apenas para usu√°rios n√£o autenticados e a op√ß√£o Sair (Logout) para usu√°rios autenticados.

5.1. Template: templates/base.html (Navega√ß√£o)

Certifique-se de que o CSS do Bootstrap Icons est√° no <head> e que a navega√ß√£o utiliza a estrutura de autentica√ß√£o condicional:
HTML

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

<div class="collapse navbar-collapse justify-content-end" id="navbarNav">
    <ul class="navbar-nav">
        {% if user.is_authenticated %}
            <li class="nav-item">
                <span class="navbar-text me-3">
                    <i class="bi bi-person-circle"></i> Ol√°, {{ user.username }}
                </span>
            </li>
            <li class="nav-item">
                <a class="btn btn-outline-light" href="{% url 'logout' %}">
                    <i class="bi bi-box-arrow-right"></i> Sair
                </a>
            </li>
        {% else %}
            <li class="nav-item me-2">
                <a class="btn btn-outline-light" href="{% url 'cadastro' %}">
                    <i class="bi bi-person-plus-fill"></i> Cadastrar
                </a>
            </li>
            <li class="nav-item">
                <a class="btn btn-light" href="{% url 'login' %}">
                    <i class="bi bi-person-fill"></i> Entrar
                </a>
            </li>
        {% endif %}
    </ul>
</div>

